<div class="container">
	<h1>Filter Playlist</h1>
	<form [formGroup]="form" (ngSubmit)="save()">
		<h2>Source Playlist</h2>
		<app-selection class="section-container" selectionLabel="Playlist" [search]="searchPlaylists"
			(selectValue)="onSelectSource($event)" displayKey="name">
		</app-selection>
		<h2>Criteria</h2>
		<div formArrayName="criteria" class="section-container inset criteria-container inset" cdkDropList
			(cdkDropListDropped)="reorderCriteria($event)">
			<div *ngFor="let criterion of formCriteria.controls; let i = index;" class="list-item criteria-item"
				[formGroupName]="i" cdkDrag cdkDragLockAxis="y"
				[cdkDragDisabled]="formCriteria.controls.length === 1 || (criterion.invalid && i === formCriteria.controls.length - 1)">
				<div class="drag-criteria"
					[class.hide]="formCriteria.controls.length === 1 || (criterion.invalid && i === formCriteria.controls.length - 1)"
					cdkDragHandle>
					<fa-icon [icon]="faBars"></fa-icon>
				</div>
				<div class="input-container">
					<input class="header-input show-optional-header" [class.show-inputs]="criterion.value.description"
						placeholder="add criteria" formControlName="purpose" (input)="onCriteriaChange()">
					<textarea class="subheader-input show-optional-subheader" placeholder="optionally, add description"
						formControlName="description" cdkTextareaAutosize (input)="onCriteriaChange()"></textarea>
				</div>
			</div>
		</div>
		<h2>Actions</h2>
		<div formArrayName="actions" class="section-container">
			<div *ngFor="let action of formActions.controls; let i = index;">
				<app-playlist-action [searchPlaylists]="searchPlaylists"></app-playlist-action>
			</div>
			<div class="list-item add-action" (click)="addDefaultAction()">
				<h2 class="placeholder">add action</h2>
			</div>
		</div>
		<h2>Collaborators</h2>
		<button class="button">Create</button>
	</form>
</div>
